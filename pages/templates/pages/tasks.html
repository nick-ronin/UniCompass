{% extends 'base/base.html' %} {% load translation_tags %} {% load static %} 
{% block extra_css %}
<link rel="stylesheet" href="{% static 'pages/css/tasks.css' %}" />
{% endblock %} 
{% block title %}Мои задания{% endblock %} 
{% block header_title %}Мои задания{% endblock %} 
{% block content %}
<div class="content-wrapper">
  <div class="profile">
    <div class="top-block">
      <div class="profile-image">
        <div class="profile-ellipse-1"></div>
        <div class="profile-ellipse-2"></div>
        <div class="profile-dot-1"></div>
        <div class="profile-rect-1"></div>
        <div class="profile-rect-2"></div>
      </div>

      <div class="profile-text">
        <h1>Хуан Ариас</h1>
        <p>Группа: КИ26-01Б</p>
        <p>Институт: ИКИТ</p>
      </div>
    </div>

    <div class="bottom-block">
      <div class="profile-level">
        <p>Уровень: 1</p>
        <progress class="common-task" value="25" max="100"></progress>
        <progress class="urgent-task" value="45" max="100"></progress>
      </div>
    </div>
  </div>

  <div class="common-tasks tasks-container" id="common-header">
    <span class="name">
      <span
        class="iconify"
        data-icon="majesticons:clipboard-check-line"
        data-width="26"
        data-height="26"
      ></span>
      Общие задания
    </span>
    <span
      class="iconify"
      data-icon="majesticons:plus"
      data-width="26"
      data-height="26"
      id="common-toggle"
    ></span>
  </div>

  <div class="common-tasks-block" id="common-block" style="display: none;">
    <form action="{% url 'tasks' %}">
      <div class="tasks-field">
        <div class="task-item">
          <div class="left">
            <input type="checkbox" name="common-task-1" id="common-task1" />
            <label for="common-task1" class="task-label"
              >Прочитать лекцию по математике</label
            >
          </div>
          <span class="task-points">+5 оп.</span>
        </div>

        <div class="task-item">
          <div class="left">
            <input type="checkbox" name="common-task-2" id="common-task2" />
            <label for="common-task2" class="task-label"
              >Сделать домашнее задание по физике</label
            >
          </div>
          <span class="task-points">+8 оп.</span>
        </div>

        <div class="task-item">
          <div class="left">
            <input type="checkbox" name="common-task-3" id="common-task3" />
            <label for="common-task3" class="task-label"
              >Подготовить отчет по лабораторной работе</label
            >
          </div>
          <span class="task-points">+7 оп.</span>
        </div>

        <div class="task-item">
          <div class="left">
            <input type="checkbox" name="common-task-4" id="common-task4" />
            <label for="common-task4" class="task-label"
              >Составить план по проекту</label
            >
          </div>
          <span class="task-points">+6 оп.</span>
        </div>
      </div>
    </form>
  </div>

  <div class="urgent-tasks tasks-container" id="urgent-header">
    <span class="name">
      <span
        class="iconify"
        data-icon="majesticons:clipboard-check-line"
        data-width="26"
        data-height="26"
      ></span>
      Задание от тьютора
    </span>
    <span
      class="iconify"
      data-icon="majesticons:plus"
      data-width="26"
      data-height="26"
      id="urgent-toggle"
    ></span>
  </div>

  <div class="urgent-tasks-block" id="urgent-block" style="display: none;">
    <form action="{% url 'tasks' %}">
      <div class="tasks-field">
        <div class="task-item">
          <div class="left">
            <input type="checkbox" name="urgent-task-1" id="urgent-task1" />
            <label for="urgent-task1" class="task-label"
              >Продлить регистрацию</label
            >
          </div>
          <span class="task-points">+10 оп.</span>
        </div>

        <div class="task-item">
          <div class="left">
            <input type="checkbox" name="urgent-task-2" id="urgent-task2" />
            <label for="urgent-task2" class="task-label"
              >Пройти тест на знание правил общежития</label
            >
          </div>
          <span class="task-points">+2 оп.</span>
        </div>

        <div class="task-item">
          <div class="left">
            <input type="checkbox" name="urgent-task-3" id="urgent-task3" />
            <label for="urgent-task3" class="task-label"
              >Сходить на мероприятие</label
            >
          </div>
          <span class="task-points">+7 оп.</span>
        </div>

        <div class="task-item">
          <div class="left">
            <input type="checkbox" name="urgent-task-4" id="urgent-task4" />
            <label for="urgent-task4" class="task-label"
              >Заселиться в общежитие</label
            >
          </div>
          <span class="task-points">+10 оп.</span>
        </div>
      </div>
    </form>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
    function toggleBlock(headerId, blockId, iconId) {
        const header = document.getElementById(headerId);
        const block = document.getElementById(blockId);
        const icon = document.getElementById(iconId);

        header.addEventListener('click', function() {
            // Toggle block display
            if (block.style.display === 'none') {
                block.style.display = 'block';
                icon.setAttribute('data-icon', 'majesticons:minus-line');
            } else {
                block.style.display = 'none';
                icon.setAttribute('data-icon', 'majesticons:plus');
            }
        });
    }

    toggleBlock('urgent-header', 'urgent-block', 'urgent-toggle');
    toggleBlock('common-header', 'common-block', 'common-toggle');
});
  </script>

  <!-- Простой скрипт для перечеркивания текста при клике -->
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const checkboxes = document.querySelectorAll('input[type="checkbox"]');

      checkboxes.forEach((checkbox) => {
        checkbox.addEventListener("change", function () {
          const span = this.nextElementSibling;
          if (this.checked) {
            span.style.textDecoration = "line-through";
            span.style.color = "#197278";
          } else {
            span.style.textDecoration = "none";
            span.style.color = "inherit";
          }
        });
      });
    });
  </script>
</div>
{% endblock %}
